let ContaoCookiebar=function(){"use strict";return function(e){let t={},o={},n={selector:".contao-cookiebar",token:"ccb_contao_token",configId:null,pageId:null,version:null,cookies:null,doNotTrack:!1,currentPageId:0,excludedPageIds:null,texts:{acceptAndDisplay:"Accept"},classes:{onSave:"cc-saved",onShow:"cc-active",onGroupToggle:"cc-active",onGroupSplitSelection:"cc-group-half"}};const c=function(e){let t=[],n=e.currentTarget,c=0;n.hasAttribute("data-accept-all")?c=1:n.hasAttribute("data-deny-all")&&(c=2),o.inputs.forEach(function(e){2===c?e.checked=!1:(1===c||e.checked)&&(t.push(parseInt(e.value)),e.checked=!0)}),w({configId:o.settings.configId,pageId:o.settings.pageId,version:o.settings.version,cookies:t}),s(t,!0),r(),m(),t.length&&t.forEach(function(e){if(o.settings.cookies.hasOwnProperty(e)&&"iframe"===o.settings.cookies[e].type){let t=document.querySelectorAll('iframe[data-ccb-id="'+e+'"]');t.length&&t.forEach(function(e){e.src=e.src,e.removeAttribute("data-ccb-id")})}o.modules.hasOwnProperty(e)&&f(e)}),o.dom.classList.add(o.settings.classes.onSave)},i=function(e){let t=E();-1===t.cookies.indexOf(e)&&(t.cookies.push(parseInt(e)),w(t),o.settings.cookies[e].confirmed=!0,m())},s=function(e,t){let n,c=[];for(n in o.settings.cookies){let i=parseInt(n);if(!o.settings.cookies.hasOwnProperty(i))continue;let s=!!o.settings.cookies[i].confirmed,r=-1!==e.indexOf(i),a=s!==r&&!r;if(o.settings.cookies[i].confirmed=r,!0===t&&a){let e=o.settings.cookies[i].token;null!==e&&e.forEach(function(e){c.push(e)})}}if(!0===t&&c.length){let e=new XMLHttpRequest;e.open("GET","/cookiebar/delete?"+k({tokens:c}),!0),e.send()}},r=function(){let e;for(e in o.settings.cookies){if(!o.settings.cookies.hasOwnProperty(e))continue;let t=o.settings.cookies[e];null!==t.resources&&t.resources.forEach(function(e){if(1===e.mode&&t.confirmed||2===e.mode&&!t.confirmed||3===e.mode){if(d(t,"resource"))return;l(e)}}),null!==t.scripts&&t.scripts.forEach(function(e){if(e.confirmed===t.confirmed||!e.confirmed==!t.confirmed){if(d(t,"script"))return;a(e)}})}},a=function(e){switch(e.script=v(e.script),e.position){case 1:document.body.append(e.script);break;case 2:document.body.prepend(e.script);break;case 3:document.head.append(e.script)}},l=function(e){try{let t=document.querySelectorAll("script[src]"),o=S(e.src);for(let e=t.length;e--;)if(-1!==t[e].src.indexOf(o))return!1}catch(e){}let t=document.createElement("script");t.type="text/javascript",t.src=e.src,null!==e.flags&&e.flags.length&&e.flags.forEach(function(e){t[e]=!0}),document.head.append(t)},d=function(e,t){switch(t){case"resource":if(-1!==o.resourceCache.indexOf(e.id))return!0;o.resourceCache.push(e.id);break;case"script":if(-1!==o.scriptCache.indexOf(e.id))return!0;o.scriptCache.push(e.id)}return!1},u=function(){let e=o.dom.querySelectorAll("[data-toggle-cookies]"),t=o.dom.querySelectorAll("[data-toggle-group]"),n=o.dom.querySelectorAll("[data-save],[data-accept-all],[data-deny-all]");n.length&&n.forEach(function(e){e.addEventListener("click",c)}),e.length&&e.forEach(function(e){e.addEventListener("click",g)}),t.length&&t.forEach(function(e){e.addEventListener("click",h)})},f=function(e){let t=document.querySelector('.cc-module[data-ccb-id="'+e+'"]');t&&t.parentNode.removeChild(t),o.modules[e](),delete o.modules[e]},p=function(){o.show?(o.dom.classList.remove(o.settings.classes.onSave),o.dom.classList.add(o.settings.classes.onShow)):o.dom.classList.remove(o.settings.classes.onShow)},g=function(){let e=this.checked,t=this.parentElement.querySelectorAll('input[name="cookie[]"]');t&&t.forEach(function(t,o){t.disabled||(t.checked=e)}),this.classList.remove(o.settings.classes.onGroupSplitSelection)},h=function(){let e=!this.classList.contains(o.settings.classes.onGroupToggle),t=this.parentElement.querySelectorAll(":scope > .toggle-group");t&&t.forEach(function(t,o){t.style.display=e?"block":"none"}),this.classList.toggle(o.settings.classes.onGroupToggle)},m=function(){let e=new XMLHttpRequest,t={referrer:window.location.pathname,configId:o.settings.configId,pageId:o.settings.pageId,version:o.settings.version,cookies:E().cookies};e.open("GET","/cookiebar/log?"+k(t),!0),e.send()},k=function(e,t){let o,n=[];for(o in e)if(e.hasOwnProperty(o)){let c=t?t+"["+o+"]":o,i=e[o];n.push(null!==i&&"object"==typeof i?k(i,c):encodeURIComponent(c)+"="+encodeURIComponent(i))}return n.join("&")},y=function(){let e={},t=!1,o=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],o++);let c=function(o){for(let n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t&&"[object Object]"===Object.prototype.toString.call(o[n])?e[n]=y(!0,e[n],o[n]):e[n]=o[n])};for(;o<n;o++)c(arguments[o]);return e},b=function(){return o.settings.token+"_"+o.settings.configId},v=function(e){let t=document.createElement("script");return t.type="text/javascript",t.innerHTML=e,t},w=function(e){localStorage.setItem(b(),JSON.stringify(e))},E=function(){let e=localStorage.getItem(b());return null===e?(e={configId:o.settings.configId,pageId:o.settings.pageId,version:-1,cookies:[]},localStorage.setItem(b(),JSON.stringify(e))):e=JSON.parse(e),e},S=function(e){let t=e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return t&&t[1]},I=function(){return!(o.settings.currentPageId&&o.settings.excludedPageIds&&-1!==o.settings.excludedPageIds.indexOf(o.settings.currentPageId))},O=function(){return!o.settings.doNotTrack||!(window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack)||!("1"==window.doNotTrack||"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack)};return t.get=function(){return o},t.getStorage=function(){return E()},t.issetCookie=function(e){let t,n=E();if(!n.cookies)return!1;if("number"==typeof e)return-1!==n.cookies.indexOf(e);for(t in o.settings.cookies)if(null!==o.settings.cookies[t].token&&-1!==o.settings.cookies[t].token.indexOf(e))return!0;return-1!==n.cookies.indexOf(e.toString())},t.unblock=function(e,t,o){"iframe"===e.tagName.toLowerCase()?e.src=o:e.tagName.toLowerCase()&&(window.location.href=o),i(t)},t.addModule=function(e,n,c){if(function(e,t){o.modules[e]=t}(e,n),t.issetCookie(e))return f(e),!1;if(c&&"object"==typeof c&&c.selector){let t=document.querySelector(c.selector);if(t){let n=document.createElement("div");if(n.setAttribute("data-ccb-id",e),n.classList.add("cc-module"),n.innerHTML="<p>"+c.message+"</p>","object"==typeof c.button&&!0===c.button.show){var s=document.createElement("button");s.innerHTML=c.button.text||o.settings.texts.acceptAndDisplay,c.button.classes&&(s.className=c.button.classes),s.addEventListener("click",function(){i(e),f(e)}),n.append(s)}t.appendChild(n)}}},t.show=function(e){o.show=!0,p(),e&&function(){let e=E();if(!e.cookies)return;e.cookies.forEach(function(e,t){let n=o.dom.querySelector('[id="c'+e+'"]');n&&(n.checked=!0)});let t=o.dom.querySelectorAll('input[name="group[]"]');t&&t.forEach(function(e){if(e.disabled)return;let t=e.parentElement.querySelectorAll('input[name="cookie[]"]'),n=[];t&&(t.forEach(function(e){e.disabled||n.push(!!e.checked)}),-1===n.indexOf(!1)?e.checked=!0:-1!==n.indexOf(!0)&&-1!==n.indexOf(!1)&&e.classList.add(o.settings.classes.onGroupSplitSelection))})}()},t.hide=function(){o.show=!1,p()},window.document.documentMode&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var o=e instanceof Node;t.appendChild(o?e:document.createTextNode(String(e)))}),this.appendChild(t)}})}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var o=e instanceof Node;t.appendChild(o?e:document.createTextNode(String(e)))}),this.insertBefore(t,this.firstChild)}})})),function(){o.settings=y(!0,n,e),o.dom=document.querySelector(o.settings.selector),o.scriptCache=[],o.resourceCache=[],o.modules={},o.show=!1;let t=E();(parseInt(t.version)!==parseInt(o.settings.version)||parseInt(t.configId)!==parseInt(o.settings.configId))&&O()&&I()&&(o.show=!0),o.inputs=[],o.dom.querySelectorAll('input[name="cookie[]"]').forEach(function(e,t){e.disabled||o.inputs.push(e)}),u(),s(t.cookies),p(),r()}(),t}}();